<!DOCTYPE html>

<html>

<head>

    <title>html5上传后立即显示</title>

    <script type="text/javascript">
        function ProcessFile(e) {

            var file = document.getElementById('file').files[0];

            if (file.length >= 2) {
                alert("无法添加")
                return false;
            }

            if (file) {

                var reader = new FileReader();

                reader.onload = function(event) {

                    var txt = event.target.result;


                    var img = document.createElement("img");

                    img.src = txt; //将图片base64字符串赋值给img的src

                    // console.log(txt);

                    document.getElementById("result").appendChild(img).name = "images";
                    var a = document.getElementsByName('images');
                    for (var i = 0; i < a.length; i++) {

                        a[i].style.width = "200px";
                        a[i].style.height = "200px";

                    }
                };

            }

            reader.readAsDataURL(file);

        }


        function contentLoaded() {

            document.getElementById('file').addEventListener('change', ProcessFile, false);

        }


        window.addEventListener("DOMContentLoaded", contentLoaded, false);
    </script>

</head>

<body>

    请选取一个图像文件: <input type="file" id="file" name="file" />

    <div id="result"></div>



</body>

</html>